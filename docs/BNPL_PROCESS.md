# BNPL (Afterpay) Ğ‘Ò¯Ñ‚ÑĞ½ ĞŸÑ€Ğ¾Ñ†ĞµÑÑ / Complete BNPL Process

## ğŸ“‹ Ğ£Ñ€ÑĞ³Ğ°Ğ»Ñ‹Ğ½ Ğ”Ğ°Ñ€Ğ°Ğ°Ğ»Ğ°Ğ» / Process Flow

### Step 1: Ğ­Ñ…Ğ»ÑÑ… Ò¯Ğµ (Not Applied)
**When**: Ğ¥ÑÑ€ÑĞ³Ğ»ÑĞ³Ñ‡ "Afterpay (BNPL)" checkbox Ğ´ÑÑÑ€ Ğ´Ğ°Ñ€Ğ½Ğ°  
**Action**: Ò®Ğ¹Ğ»Ñ‡Ğ¸Ğ»Ğ³ÑÑĞ½Ğ¸Ğ¹ Ğ½Ó©Ñ…Ñ†Ó©Ğ» modal Ğ½ÑÑĞ³Ğ´ÑĞ½Ñ

---

### Step 2: Ò®Ğ¹Ğ»Ñ‡Ğ¸Ğ»Ğ³ÑÑĞ½Ğ¸Ğ¹ Ğ½Ó©Ñ…Ñ†Ó©Ğ» (Terms Step)

**ĞĞ³ÑƒÑƒĞ»Ğ³Ğ° / Content**:
- âš ï¸ BNPL-Ğ½ Ğ¾Ğ½Ñ†Ğ³Ğ¾Ğ¹ Ğ°Ğ½Ñ…Ğ°Ğ°Ñ€ÑƒÑƒĞ»Ğ³Ğ°
- ğŸ“œ Ò®Ğ¹Ğ»Ñ‡Ğ¸Ğ»Ğ³ÑÑĞ½Ğ¸Ğ¹ Ğ½Ó©Ñ…Ñ†Ó©Ğ» (4 section)
  1. Ò®Ğ¹Ğ»Ñ‡Ğ¸Ğ»Ğ³ÑÑĞ½Ğ¸Ğ¹ Ğ½Ó©Ñ…Ñ†Ó©Ğ»
  2. Ğ¥ÑƒÑ€Ğ°Ğ°Ğ¼Ğ¶ Ğ±Ğ¾Ğ»Ğ¾Ğ½ ÑˆĞ¸Ğ¼Ñ‚Ğ³ÑĞ»
  3. ĞœÑĞ´ÑÑĞ»Ğ»Ğ¸Ğ¹Ğ½ Ğ½ÑƒÑƒÑ†Ğ»Ğ°Ğ»
  4. Ğ—Ó©Ñ€Ñ‡Ğ¸Ğ» Ğ±Ğ¾Ğ»Ğ¾Ğ½ Ğ¼Ğ°Ñ€Ğ³Ğ°Ğ°Ğ½

**Ğ¢Ğ¾Ğ²Ñ‡ / Buttons**:
- âœ… **"Ğ—Ó©Ğ²ÑˆÓ©Ó©Ñ€Ñ‡ Ğ±Ğ°Ğ¹Ğ½Ğ°" / "I Agree"** â†’ Ğ¥Ò¯ÑÑĞ»Ñ‚Ğ¸Ğ¹Ğ½ Ñ„Ğ¾Ñ€Ğ¼ Ñ€ÑƒÑƒ ÑˆĞ¸Ğ»Ğ¶Ğ¸Ğ½Ñ
- âŒ **"Ğ‘Ğ¾Ğ»Ğ¸Ñ…" / "Cancel"** â†’ Modal Ñ…Ğ°Ğ°Ğ³Ğ´Ğ°Ğ½Ğ°

---

### Step 3: Ğ¥Ò¯ÑÑĞ»Ñ‚Ğ¸Ğ¹Ğ½ Ñ„Ğ¾Ñ€Ğ¼ (Application Step)

**Ğ‘Ó©Ğ³Ğ»Ó©Ñ… Ğ¼ÑĞ´ÑÑĞ»ÑĞ» / Required Information**:
1. ğŸ¢ **Ğ‘Ğ¸Ğ·Ğ½ĞµÑĞ¸Ğ¹Ğ½ Ğ½ÑÑ€** - Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚ (store.name)
2. ğŸ“‚ **Ğ‘Ğ¸Ğ·Ğ½ĞµÑĞ¸Ğ¹Ğ½ Ğ°Ğ½Ğ³Ğ¸Ğ»Ğ°Ğ»** - Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚ (store.category)
3. ğŸ’° **Ğ¡Ğ°Ñ€Ñ‹Ğ½ Ğ¾Ñ€Ğ»Ğ¾Ğ³Ğ¾** - Ñ…ÑÑ€ÑĞ³Ğ»ÑĞ³Ñ‡ Ğ¾Ñ€ÑƒÑƒĞ»Ğ½Ğ° (Ğ¼Ğ¾Ğ½Ğ³Ğ¾Ğ» Ñ‚Ó©Ğ³Ñ€Ó©Ğ³Ó©Ó©Ñ€)
4. ğŸ›’ **Ğ”ÑƒĞ½Ğ´Ğ°Ğ¶ Ğ·Ğ°Ñ…Ğ¸Ğ°Ğ»Ğ³Ñ‹Ğ½ Ğ´Ò¯Ğ½** - Ñ…ÑÑ€ÑĞ³Ğ»ÑĞ³Ñ‡ Ğ¾Ñ€ÑƒÑƒĞ»Ğ½Ğ°
5. ğŸ¦ **BNPL Ò¯Ğ¹Ğ»Ñ‡Ğ¸Ğ»Ğ³ÑÑ Ò¯Ğ·Ò¯Ò¯Ğ»ÑĞ³Ñ‡**:
   - âš¡ **StorePay** (recommended)
   - ğŸ’³ **LendPay**
   - ğŸ“± **SimplePay**

**Ğ¢Ğ¾Ğ²Ñ‡ / Buttons**:
- âœ… **"Ğ¥Ò¯ÑÑĞ»Ñ‚ Ğ¸Ğ»Ğ³ÑÑÑ…" / "Submit Application"** â†’ Server Ñ€Ò¯Ò¯ Ğ¸Ğ»Ğ³ÑÑĞ½Ñ
- â—€ï¸ **"Ğ‘ÑƒÑ†Ğ°Ñ…" / "Back"** â†’ Terms Step Ñ€ÑƒÑƒ Ğ±ÑƒÑ†Ğ½Ğ°

---

### Step 4: Ğ˜Ğ»Ğ³ÑÑÑĞ½Ğ¸Ğ¹ Ğ´Ğ°Ñ€Ğ°Ğ° (Submitted Step)

**Ğ¥Ğ°Ñ€ÑƒÑƒĞ»Ğ°Ñ… / Display**:
- âœ… ĞĞ¼Ğ¶Ğ¸Ğ»Ñ‚Ñ‚Ğ°Ğ¹ Ğ¸Ğ»Ğ³ÑÑĞ»ÑÑ
- â³ "Ğ¢Ğ°Ğ½Ñ‹ Ñ…Ò¯ÑÑĞ»Ñ‚ Ñ…Ò¯Ğ»ÑÑĞ³Ğ´ÑĞ¶ Ğ±Ğ°Ğ¹Ğ½Ğ°. 1-2 Ñ…Ğ¾Ğ½Ğ¾Ğ³Ñ‚ Ğ±Ğ°Ñ‚Ğ»Ğ°Ğ³Ğ´Ğ°Ñ… Ğ±Ğ¾Ğ»Ğ½Ğ¾."
- ğŸ”„ **3 ÑĞµĞºÑƒĞ½Ğ´Ñ‹Ğ½ Ğ´Ğ°Ñ€Ğ°Ğ°** modal Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚ Ñ…Ğ°Ğ°Ğ³Ğ´Ğ°Ğ½Ğ°

---

## ğŸ”„ Ğ¢Ó©Ğ»Ó©Ğ²Ò¯Ò¯Ğ´ / Application Statuses

### 1ï¸âƒ£ `not_applied` - Ğ¥Ò¯ÑÑĞ»Ñ‚ Ğ¸Ğ»Ğ³ÑÑĞ³ÑÑĞ³Ò¯Ğ¹
**UI Behavior**:
- Checkbox enabled, ÑĞ½Ğ³Ğ¸Ğ¹Ğ½ Ñ…Ğ°Ñ€Ğ°Ğ³Ğ´Ğ°Ğ½Ğ°
- Click â†’ BNPL modal Ğ½ÑÑĞ³Ğ´ÑĞ½Ñ

**Badge**: None

---

### 2ï¸âƒ£ `pending` - Ğ¥Ò¯Ğ»ÑÑĞ³Ğ´ÑĞ¶ Ğ±Ğ°Ğ¹Ğ½Ğ° â³
**UI Behavior**:
- Checkbox **disabled**
- Click â†’ Alert: _"Ğ¢Ğ°Ğ½Ñ‹ Ñ…Ò¯ÑÑĞ»Ñ‚ Ñ…Ò¯Ğ»ÑÑĞ³Ğ´ÑĞ¶ Ğ±Ğ°Ğ¹Ğ½Ğ°. Ğ‘Ğ°Ñ‚Ğ»Ğ°Ğ³Ğ´ÑĞ°Ğ½Ñ‹ Ğ´Ğ°Ñ€Ğ°Ğ° Ğ¸Ğ´ÑĞ²Ñ…Ğ¶Ò¯Ò¯Ğ»ÑÑ… Ğ±Ğ¾Ğ»Ğ¾Ğ¼Ğ¶Ñ‚Ğ¾Ğ¹."_

**Badge**: 
```
ğŸŸ¡ PENDING - Ğ¨Ğ°Ğ»Ğ³Ğ°Ğ³Ğ´Ğ°Ğ¶ Ğ±Ğ°Ğ¹Ğ½Ğ°
```

---

### 3ï¸âƒ£ `approved` - Ğ‘Ğ°Ñ‚Ğ»Ğ°Ğ³Ğ´ÑĞ°Ğ½ âœ…
**UI Behavior**:
- Checkbox **enabled**
- Click â†’ Ğ­Ğ½Ğ³Ğ¸Ğ¹Ğ½ toggle (Ğ¸Ğ´ÑĞ²Ñ…Ğ¶Ò¯Ò¯Ğ»ÑÑ…/Ğ¸Ğ´ÑĞ²Ñ…Ğ³Ò¯Ğ¹ Ğ±Ğ¾Ğ»Ğ³Ğ¾Ñ…)

**Badge**:
```
ğŸŸ¢ APPROVED - Ğ˜Ğ´ÑĞ²Ñ…Ğ¶Ò¯Ò¯Ğ»ÑÑ… Ğ±Ğ¾Ğ»Ğ¾Ğ¼Ğ¶Ñ‚Ğ¾Ğ¹
```

---

### 4ï¸âƒ£ `rejected` - Ğ¢Ğ°Ñ‚Ğ³Ğ°Ğ»Ğ·ÑĞ°Ğ½ âŒ
**UI Behavior**:
- Checkbox **disabled**
- Click â†’ BNPL modal Ğ´Ğ°Ñ…Ğ¸Ğ½ Ğ½ÑÑĞ³Ğ´ÑĞ½Ñ (reapply Ğ±Ğ¾Ğ»Ğ¾Ğ¼Ğ¶Ñ‚Ğ¾Ğ¹)
- Ğ¨Ğ°Ğ»Ñ‚Ğ³Ğ°Ğ°Ğ½ Ñ…Ğ°Ñ€ÑƒÑƒĞ»Ğ½Ğ°: `rejectionReason`

**Badge**:
```
ğŸ”´ REJECTED - Ğ”Ğ°Ñ…Ğ¸Ğ½ Ñ…Ò¯ÑÑĞ»Ñ‚ Ğ¸Ğ»Ğ³ÑÑÑ… Ğ±Ğ¾Ğ»Ğ¾Ğ¼Ğ¶Ñ‚Ğ¾Ğ¹
Reason: Insufficient monthly revenue
```

---

## ğŸ’¾ Data Structure

```typescript
interface BNPLApplicationStatus {
  status: 'not_applied' | 'pending' | 'approved' | 'rejected';
  appliedAt?: string;  // ISO timestamp
  provider?: 'storepay' | 'lendpay' | 'simplepay';
  rejectionReason?: string;
}

// Example: Pending application
{
  status: 'pending',
  appliedAt: '2026-01-19T12:00:00Z',
  provider: 'storepay'
}

// Example: Rejected application
{
  status: 'rejected',
  appliedAt: '2026-01-18T10:00:00Z',
  provider: 'lendpay',
  rejectionReason: 'Monthly revenue below minimum threshold (â‚®500,000)'
}
```

---

## ğŸ”Œ Backend Integration

### Submit Application
```typescript
// Frontend submission
const handleBnplSubmit = () => {
  onUpdate({
    fulfillment: {
      ...store.fulfillment,
      bnplApplicationStatus: {
        status: 'pending',
        appliedAt: new Date().toISOString(),
        provider: bnplFormData.provider
      }
    }
  });
};
```

### Admin Approval (Backend)
```sql
-- Approve application
UPDATE businesses 
SET fulfillment = jsonb_set(
  fulfillment,
  '{bnplApplicationStatus,status}',
  '"approved"'
)
WHERE id = 'BIZ-001';

-- Reject with reason
UPDATE businesses 
SET fulfillment = jsonb_set(
  jsonb_set(
    fulfillment,
    '{bnplApplicationStatus,status}',
    '"rejected"'
  ),
  '{bnplApplicationStatus,rejectionReason}',
  '"Insufficient monthly revenue"'
)
WHERE id = 'BIZ-001';
```

---

## ğŸ¨ UI Components

### BNPL Modal Flow
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“‹ STEP 1: Terms                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ âš ï¸ Important Notice            â”‚  â”‚
â”‚  â”‚ BNPL services may incur fees   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                       â”‚
â”‚  1. Terms of Service                  â”‚
â”‚  2. Fees and Charges                  â”‚
â”‚  3. Data Privacy                      â”‚
â”‚  4. Disputes and Resolution           â”‚
â”‚                                       â”‚
â”‚  [  Cancel  ]  [ âœ“ I Agree ]         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“ (Click "I Agree")
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“ STEP 2: Application Form          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Business Name: [Auto-filled]    â”‚  â”‚
â”‚  â”‚ Category:      [Auto-filled]    â”‚  â”‚
â”‚  â”‚ Monthly Revenue: [â‚® _______]    â”‚  â”‚
â”‚  â”‚ Avg Order Value: [â‚® _______]    â”‚  â”‚
â”‚  â”‚ Provider: [â—‹ StorePay â–¼]        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                       â”‚
â”‚  [  â† Back  ]  [ Submit Application â†’]â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“ (Click "Submit")
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ… STEP 3: Submitted                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚     âœ“                            â”‚  â”‚
â”‚  â”‚   Success!                       â”‚  â”‚
â”‚  â”‚                                  â”‚  â”‚
â”‚  â”‚   Your application has been      â”‚  â”‚
â”‚  â”‚   submitted successfully.        â”‚  â”‚
â”‚  â”‚                                  â”‚  â”‚
â”‚  â”‚   Status: Pending approval       â”‚  â”‚
â”‚  â”‚   Expected: 1-2 business days    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                       â”‚
â”‚  Closing automatically in 3s...       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âš ï¸ Error Handling

| Error | Message (MN) | Message (EN) | Action |
|-------|--------------|--------------|--------|
| Empty fields | Ğ‘Ò¯Ñ… Ñ‚Ğ°Ğ»Ğ±Ğ°Ñ€Ñ‹Ğ³ Ğ±Ó©Ğ³Ğ»Ó©Ğ½Ó© Ò¯Ò¯ | Please fill all fields | Show alert |
| Network error | Ğ¥Ğ¾Ğ»Ğ±Ğ¾Ğ»Ñ‚Ñ‹Ğ½ Ğ°Ğ»Ğ´Ğ°Ğ° Ğ³Ğ°Ñ€Ğ»Ğ°Ğ° | Network error occurred | Retry button |
| Already pending | Ğ¢Ğ°Ğ½Ñ‹ Ñ…Ò¯ÑÑĞ»Ñ‚ Ñ…Ò¯Ğ»ÑÑĞ³Ğ´ÑĞ¶ Ğ±Ğ°Ğ¹Ğ½Ğ° | Application already pending | Show status |
| Validation failed | ĞÑ€Ğ»Ğ¾Ğ³Ğ¾ Ñ…Ğ°Ğ½Ğ³Ğ°Ğ»Ñ‚Ğ³Ò¯Ğ¹ Ğ±Ğ°Ğ¹Ğ½Ğ° | Revenue below minimum | Show reason |

---

## ğŸ“Š Analytics Events

```typescript
// Track BNPL funnel
analytics.track('bnpl_terms_viewed');
analytics.track('bnpl_terms_accepted');
analytics.track('bnpl_application_started');
analytics.track('bnpl_application_submitted', {
  provider: 'storepay',
  monthly_revenue: 1500000,
  avg_order_value: 45000
});
analytics.track('bnpl_application_approved');
analytics.track('bnpl_enabled');
```

---

## ğŸ§ª Testing Checklist

- [ ] Terms modal opens when clicking BNPL for first time
- [ ] Application form validates all required fields
- [ ] Submission creates `pending` status
- [ ] Pending applications show disabled checkbox with badge
- [ ] Approved applications allow toggle on/off
- [ ] Rejected applications allow reapply
- [ ] Language switching works (MN â†” EN)
- [ ] Mobile responsive layout
- [ ] Auto-close works after submission (3s)
- [ ] Back button returns to terms

---

**Version**: 1.0  
**Last Updated**: 2026-01-19  
**Status**: âœ… Documentation Complete
